
# ğŸ“„ AIDesignPage API Document

## ğŸ“š API ç¸½è¦½

| åŠŸèƒ½                           | Method | Path                        | èªªæ˜                                   |
|--------------------------------|--------|-----------------------------|--------------------------------------|
| ä¸Šå‚³åœ–ç‰‡è‡³å¾Œç«¯                  | POST   | `/upload`                   | ä¸Šå‚³åœ–ç‰‡ï¼ˆBase64ç·¨ç¢¼ï¼‰ï¼Œå›å‚³æª”æ¡ˆ ID  |
| ç”Ÿæˆåœ–ç‰‡                        | POST   | `/generate`                 | å‚³é€ prompt èˆ‡é™„åŠ åœ–ç‰‡ IDï¼Œç”¢ç”Ÿæ–°åœ–ç‰‡ |
| é‡æ–°ç”Ÿæˆåœ–ç‰‡ï¼ˆä½¿ç”¨ bestPromptï¼‰ | POST   | `/generate`                 | ç”¨ä¸Šæ¬¡ç”Ÿæˆçš„æœ€ä½³æç¤ºé‡ç”Ÿä¸€å¼µåœ–ç‰‡     |
| æ¸¬è©¦ Lambda é€£ç·šï¼ˆéä¸»è¦æµç¨‹ï¼‰   | POST   | `/predict`                  | æ¸¬è©¦ç”¨ API                           |

---

## ğŸ“¤ 1. ä¸Šå‚³æª”æ¡ˆ API

- **URL**
  ```
  POST https://jetcaa3x74.execute-api.us-west-2.amazonaws.com/prod/upload
  ```

- **Request Body**
  ```json
  {
    "filename": "example.jpg",
    "image_base64": "Base64ç·¨ç¢¼çš„åœ–ç‰‡è³‡æ–™"
  }
  ```

- **Response**
  ```json
  {
    "fileId": "ä¸Šå‚³å¾ŒS3å„²å­˜çš„æª”æ¡ˆID"
  }
  ```

- **èªªæ˜**
  - å°‡åœ–ç‰‡è½‰æˆ Base64 å­—ä¸²å¾Œä¸Šå‚³ã€‚
  - å›å‚³çš„ `fileId` ç”¨ä¾†å¾ŒçºŒç”Ÿæˆåœ–ç‰‡æ™‚é™„åŠ åœ–ç‰‡ã€‚

---

## ğŸ¨ 2. ç”Ÿæˆåœ–ç‰‡ API

- **URL**
  ```
  POST https://jetcaa3x74.execute-api.us-west-2.amazonaws.com/prod/generate
  ```

- **Request Body**
  ```json
  {
    "prompt": "è¨­è¨ˆä¸€æ¬¾æœªä¾†ä¸»ç¾©é¢¨æ ¼çš„æ©Ÿæ®¼",
    "images": ["fileId1", "fileId2"]
  }
  ```

- **Response**
  ```json
  {
    "imageUrl": "ç”Ÿæˆå‡ºä¾†çš„æ–°åœ–ç‰‡ç¶²å€",
    "bestPrompt": "AIå„ªåŒ–å¾Œçš„æœ€ä½³æç¤º"
  }
  ```

- **èªªæ˜**
  - å‚³å…¥ `prompt`ï¼ˆå¿…è¦ï¼‰åŠé™„åŠ åœ–ç‰‡ `images`ï¼ˆé¸å¡«ï¼‰ã€‚
  - å›å‚³æ–°ç”Ÿæˆçš„åœ–ç‰‡ç¶²å€åŠ AI å„ªåŒ–å¾Œçš„æœ€ä½³æç¤ºèªã€‚

---

## â™»ï¸ 3. é‡æ–°ç”Ÿæˆåœ–ç‰‡ API

> ä½¿ç”¨ä¸Šæ¬¡å¾Œç«¯å›å‚³çš„ `bestPrompt` ç›´æ¥é‡ç”Ÿä¸€å¼µæ–°çš„åœ–ç‰‡ã€‚

- **URL**
  ```
  POST https://jetcaa3x74.execute-api.us-west-2.amazonaws.com/prod/generate
  ```

- **Request Body**
  ```json
  {
    "prompt": "ä¸Šæ¬¡å¾Œç«¯æä¾›çš„ bestPrompt",
    "images": ["fileId1", "fileId2"]
  }
  ```

- **Response**
  èˆ‡ç”Ÿæˆåœ–ç‰‡å›å‚³æ ¼å¼ç›¸åŒã€‚

- **èªªæ˜**
  - å‰ç«¯ä¸å†è¦æ±‚ä½¿ç”¨è€…é‡æ–°è¼¸å…¥æ–‡å­—ã€‚
  - ç›´æ¥ä½¿ç”¨ä¸Šä¸€æ¬¡å›å‚³çš„ `bestPrompt` ä¾†ç”¢ç”Ÿæ–°çš„åœ–ç‰‡ã€‚

---

## ğŸ›  4. æ¸¬è©¦ Lambda é€£ç·š APIï¼ˆéä¸»è¦åŠŸèƒ½ï¼‰

- **URL**
  ```
  POST https://jetcaa3x74.execute-api.us-west-2.amazonaws.com/prod/predict
  ```

- **Request Body**
  ```json
  {
    "input": "æ¸¬è©¦è³‡æ–™"
  }
  ```

- **Response**
  ```json
  {
    "result": "Lambdaå›å‚³çš„çµæœ"
  }
  ```

- **èªªæ˜**
  - ç”¨ä¾†æ¸¬è©¦ Lambda æœå‹™æ˜¯å¦æ­£å¸¸é‹ä½œã€‚
  - ä¸å½±éŸ¿ä¸»è¦çš„åœ–ç‰‡ç”Ÿæˆæµç¨‹ã€‚

---

## ğŸ–¼ï¸ åœ–ç‰‡ URL è·¯å¾‘è¦å‰‡

- ä¸Šå‚³åœ–ç‰‡æˆåŠŸå¾Œï¼Œåœ–ç‰‡æœƒè¢«æ”¾åˆ°ï¼š
  ```
  https://s3.us-west-2.amazonaws.com/generate.imagenfile/uploads/{fileId}.jpg
  ```

---

## ğŸš€ ç³»çµ±æµç¨‹ç°¡è¿°

1. **ä½¿ç”¨è€…è¼¸å…¥ prompt** â¡ï¸ æŒ‰ä¸‹ã€ŒGenerateã€ã€‚
2. **å‰ç«¯å‘¼å« `/generate`** â¡ï¸ æ‹¿åˆ° `imageUrl` & `bestPrompt`ã€‚
3. **ç•«é¢æ›´æ–°ï¼Œé¡¯ç¤ºç”Ÿæˆåœ–ç‰‡**ã€‚
4. **ä½¿ç”¨è€…è‹¥è¦é‡æ–°ç”Ÿæˆ** â¡ï¸ æŒ‰ä¸‹ã€ŒRotateã€(ç”¨ `bestPrompt` é‡æ–°å‘¼å« `/generate`)ã€‚
5. **ä½¿ç”¨è€…å¯ä¸Šå‚³åœ–ç‰‡** â¡ï¸ å‘¼å« `/upload`ï¼Œå†é¸å–è¦ä¸€èµ·é€å‡ºçš„åœ–ç‰‡ã€‚
6. **æ‰€æœ‰æ­·å²ç”Ÿæˆåœ–ç‰‡åƒ…å­˜åœ¨æ–¼å‰ç«¯**ï¼ˆåˆ·æ–°é é¢æœƒæ¶ˆå¤±ï¼‰ã€‚
